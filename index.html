<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Lone Worker Check-In</title>
<style>
  /* ===== Base Styles ===== */
  body {
    font-family: 'Segoe UI', Roboto, Arial, sans-serif;
    margin:0; padding:0;
    background:#f4f6f8; color:#333;
    display:flex; flex-direction:column; align-items:center;
    min-height:100vh; box-sizing:border-box;
    transition: filter 0.3s ease;
  }
  main {
    width:100%; max-width:600px;
    background:#fff; padding:20px;
    margin:30px 10px 0 10px;
    border-radius:12px;
    box-shadow:0 4px 8px rgba(0,0,0,0.1);
    box-sizing:border-box;
  }
  .form-group{display:flex; flex-direction:column; gap:10px; margin-bottom:15px;}
  input, button, select {padding:10px; font-size:16px; border-radius:6px; border:1px solid #ccc; width:100%; box-sizing:border-box;}
  button{cursor:pointer; border:none; transition: background 0.2s, transform 0.1s;}
  button:hover { transform: scale(1.02); }
  #checkin { background-color:#2ecc71; color:white; }
  #getLocation { background-color:#3498db; color:white; }
  #addContactBtn { background:#f39c12; color:white; }
  #saveNewContact { background:#27ae60; color:white; }
  #cancelNewContact { background:#e74c3c; color:white; }
  #confirmation{margin-top:15px; padding:10px; border-radius:6px; display:none; text-align:center; font-weight:bold;}
  #activeCheckins, #checkinHistory{margin-top:25px; background:#fdfdfd; padding:15px; border-radius:8px; box-shadow:0 2px 5px rgba(0,0,0,0.05);}
  ul { padding-left:0; list-style:none; line-height:1.6; }
  #newContactForm { display:none; margin-top:10px; background:#fafafa; padding:15px; border-radius:8px; border:1px solid #ddd; box-shadow:0 1px 3px rgba(0,0,0,0.05);}
  #newContactForm .form-group { margin-bottom:10px; }

  /* ===== PIN Overlay ===== */
  #pinOverlay {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: rgba(0,0,0,0.85);
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    z-index: 9999;
    color: white;
    font-family: Arial, sans-serif;
    padding: 20px;
    box-sizing: border-box;
    text-align: center;
  }
  #pinOverlay h2 { font-size: 1.5em; margin-bottom: 15px; }
  #pinOverlay input {
    font-size: 2em; padding: 10px; width: 120px; max-width: 80%;
    text-align: center; border-radius: 8px; border: none; margin-bottom: 15px; letter-spacing: 0.3em;
  }
  #pinOverlay button {
    padding: 10px 25px; font-size: 1em; border-radius: 8px; border: none;
    background: #2ecc71; color: white; cursor: pointer;
    transition: transform 0.1s, background 0.2s;
  }
  #pinOverlay button:hover { transform: scale(1.05); background: #27ae60; }
  #pinError { color: #ff4d4d; margin-top: 10px; display: none; font-size: 0.9em; }

  @media(max-width: 400px){
    #pinOverlay input { font-size: 1.8em; width: 100px; }
    #pinOverlay h2 { font-size: 1.3em; }
    #pinOverlay button { padding: 8px 20px; font-size: 0.9em; }
  }
</style>
</head>
<body>
<!-- ===== PIN Overlay ===== -->
<div id="pinOverlay">
  <h2>Enter 4-Digit PIN</h2>
  <input id="pinInput" type="password" maxlength="4" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
  <button id="pinSubmit">Enter</button>
  <div id="pinError">Incorrect PIN</div>
</div>

<main id="mainContent">
  <h1>Lone Worker Check-In</h1>

  <div class="form-group">
    <input id="user" placeholder="User ID">
    <input id="site" placeholder="Site Name">
    <button id="getLocation">üìç Get My Location</button>
    <label>Estimated Completion Time:</label>
    <input id="checkinTime" type="time" placeholder="Check-Out Time (HH:MM)">
    
    <label for="emergencyContact">Emergency Contact:</label>
    <select id="emergencyContact"><option value="">Loading contacts...</option></select>

    <button id="addContactBtn">‚ûï Add New Emergency Contact</button>
    <div id="newContactForm">
      <div class="form-group"><input id="newContactName" placeholder="Info"></div>
      <div class="form-group"><input id="newContactPhone" placeholder="Phone"></div>
      <div class="form-group">
        <button id="saveNewContact">Save Contact</button>
        <button id="cancelNewContact">Cancel</button>
      </div>
    </div>
  </div>

  <div class="form-group"><button id="checkin">‚úÖ Check In</button></div>
  <div id="confirmation"></div>

  <div id="activeCheckins"><h2>Active Check-Ins</h2><p>Loading...</p></div>
  <div id="checkinHistory">
    <h2 id="toggleHistory" style="cursor:pointer; user-select:none;">‚ñº Check-In History</h2>
    <div id="checkinHistoryContent" style="display:block;"><p>Loading...</p></div>
  </div>
</main>

<script src="app.js"></script>
</body>
</html>
